{% extends "core/base.html" %}

{% block graphs-nav %}class="active"{% endblock %}

{% block content %}

<script src="/static/bootstrap-slider.js"></script>
<link href="/static/bootstrap-slider.css" rel="stylesheet">

<!-- <div style="float:right; margin-right: 100px;" class="fb-share-button" data-href="https://histograph.us/" data-type="button"></div>
 -->
 <div id="row">
  <div id="load" class="col-sm-12" align="center"></div>

  <div id="leftmenu" class="menuclosed" style="padding: 0px; transition: left 0.5s ease; -webkit-transition: left 0.5s ease;">
    <div class="btn-group-vertical">
      <button type="button" class="btn btn-default btn-lg" onClick="loadSunburst()" id="sunburst" data-toggle="tooltip" data-container="body" data-placement="right" title="View how you browse different sites">
        <img src="/static/Sunburst_light.gif" width="32px" height="36px">
        <div width="10px"></div>
        Sunburst
      </button>
      <button type="button" class="btn btn-default btn-lg" onClick="loadDigraph()" id="digraph" data-toggle="tooltip" data-container="body" data-placement="right" title="View how you travel from one site to another">
        <img src="/static/Digraph.gif" height="36px" width="69px">
        <div width="10px"></div>
        Digraph
      </button>
      <button type="button" class="btn btn-default btn-lg" onClick="loadLineplot()" id="lineplot" data-toggle="tooltip" data-container="body" data-placement="right" title="Look at browsing patterns of your top sites over time">
        <img src="/static/Line.gif" height="36px" width="65px">
        <div width="10px"></div>
        Line Plot
      </button>
      <button type="button" class="btn btn-default btn-lg" onClick="loadFriends()" id="friends" data-toggle="tooltip" data-container="body" data-placement="right" title="See which friends have a browsing history most similar to yours">
        <img src="/static/Friends.gif" height="36px" width="95px">
        <div width="10px"></div>
        Friends
      </button>
    </div>
  </div>

  <div id="leftmenu_over">
  </div>

  <div id="rightmenu" class="menuclosed" style="padding: 0px; transition: right 0.5s ease; -webkit-transition: right 0.5s ease;">
    <div class="btn-group-vertical">
      <button type="button" class="btn btn-default btn-lg" onClick="loadDates()" id="1w" data-toggle="tooltip" data-container="body" data-placement="left" title="Reload this graph with data from the past week">This Week</button>
      <button type="button" class="btn btn-default btn-lg" onClick="loadDates()" id="1m" data-toggle="tooltip" data-container="body" data-placement="left" title="Reload this graph with data from the past month">This Month</button>
      <button type="button" class="btn btn-default btn-lg" onClick="loadDates()" id="3m" data-toggle="tooltip" data-container="body" data-placement="left" title="Reload this graph with data from the past three months">3 Months</button>
      <button type="button" class="btn btn-default btn-lg" onClick="loadDates()" id="6m" data-toggle="tooltip" data-container="body" data-placement="left" title="Reload this graph with data from the past six months">6 Months</button>
      <button type="button" class="btn btn-default btn-lg" onClick="loadDates()" id="1y" data-toggle="tooltip" data-container="body" data-placement="left" title="Reload this graph with data from the past year">Past Year</button>
    </div>
    <!-- <div>
      <input type="text" class="dateslider" value="" data-slider-min="0" data-slider-max="300" data-slider-step="1" data-slider-value="[0,7]" data-slider-orientation="vertical">
    </div> -->
  </div>

  <div id="rightmenu_over">
  </div>

  <div style="position:absolute; top:50%; right:90px">
    <a id="rightButton" class="btn btn-primary btn-lg btn-side-menu glyphicon glyphicon-chevron-right" data-toggle="tooltip" data-container="body" data-placement="left" title="Change time settings"></a>
  </div>

  <div style="position:absolute; top:50%; left:20px;">
    <a id="leftButton" class="btn btn-primary btn-lg btn-side-menu glyphicon glyphicon-chevron-left" data-toggle="tooltip" data-container="body" data-placement="right" title="View graphs on your history"></a>
  </div>
</div>

<div style="position:absolute; top:25%; right:90px;">
<div id="qmark" class="qmarkcircle" style="text-align: center;" data-toggle="tooltip" data-container="body" data-placement="bottom" title="Click on a black link to visit the site or a colored link to dive deeper. Click in the center to go back up a level.">?</div>
</div>
<script type="text/javascript">
// load graphs on click

var graph_state = 'sunburst';

function loadSunburst() {
  $("#load").load("../graph/sunburst");
  console.log("loading sunburst");
  $('#qmark').tooltip('hide')
          .attr('data-original-title', 'Click on a black link to visit the site or a colored link to dive deeper. Click in the center to go back up a level.')
          .tooltip('fixTitle')
  graph_state = 'sunburst';
}

function loadDigraph() {
  $("#load").load("../graph/digraph");
  $('#qmark').tooltip('hide')
          .attr('data-original-title', 'Examine the nodes to see how you travel from one site to another, and look at the links to see how you got there')
          .tooltip('fixTitle')
  graph_state = 'digraph';
}

function loadLineplot() {
  $("#load").load("../graph/lineplot");
  $('#qmark').tooltip('hide')
          .attr('data-original-title', 'Hover over the top plot to see visits per day to your favorite sites. Zoom in by dragging the crosshairs in the bottom plot.')
          .tooltip('fixTitle')
  graph_state = 'lineplot';
}

function loadFriends() {
  $("#load").load("../graph/friends");
  $('#qmark').tooltip('hide')
          .attr('data-original-title', 'The shorter the line, the more similar you are')
          .tooltip('fixTitle')
  graph_state = 'friends';  
}

</script>

<!-- initialize slider plugin -->
<script>
$(document).ready(function(){
  $('#leftButton').click(function () {
      toggleleftmenu();
  });

  $('#leftmenu_over').click(function () {
      closeleftmenu();
  });

  function toggleleftmenu (){
      if ( $('#leftmenu').hasClass('menuopen') ) {
          closeleftmenu();
      } else {
          openleftmenu();
      }
  }

  function openleftmenu(){
      if ( $('#leftmenu').hasClass('menuclosed') ) {
          $('#leftmenu').css('left','0px');
          $('#leftmenu').removeClass('menuclosed');
          $('#leftmenu').addClass('menuopen');
          $('#leftmenu_over').show();
      };
  }

  function closeleftmenu(){
      if ( $('#leftmenu').hasClass('menuopen') ) {
          $('#leftmenu').css('left','-300px');
          $('#leftmenu').removeClass('menuopen')
          $('#leftmenu').addClass('menuclosed')
          $('#leftmenu_over').hide();
      };
  }

  $('#rightButton').click(function () {
      togglerightmenu();
  });

  $('#rightmenu_over').click(function () {
      closerightmenu();
  });

  function togglerightmenu (){
      if ( $('#rightmenu').hasClass('menuopen') ) {
          closerightmenu();
      } else {
          openrightmenu();
      }
  }

  function openrightmenu(){
      if ( $('#rightmenu').hasClass('menuclosed') ) {
          $('#rightmenu').css('right','0px');
          $('#rightmenu').removeClass('menuclosed');
          $('#rightmenu').addClass('menuopen');
          $('#rightmenu_over').show();
      };
  }

  function closerightmenu(){
      if ( $('#rightmenu').hasClass('menuopen') ) {
          $('#rightmenu').css('right','-300px');
          $('#rightmenu').removeClass('menuopen')
          $('#rightmenu').addClass('menuclosed')
          $('#rightmenu_over').hide();
      };
  }

  loadSunburst();

});
</script>
<script type="text/javascript">

function loadDates() {
  if ($("#sunburst").hasClass("active")) {
    loadSunburst();
  }
  else if ($("#digraph").hasClass("active")) {
    loadDigraph();
  }
  else if ($("#friends").hasClass("active")) {
    loadFriends();
  }
  else if ($("#lineplot").hasClass("active")) {
    loadLineplot();
  }
}
// active buttons on left and right menus
$(document).ready(function() {
  $('#friends').removeClass('active');
  $('#digraph').removeClass('active');
  $('#lineplot').removeClass('active');
  $('#sunburst').removeClass('active');
  $('#sunburst').addClass('active');

  $('#1w').removeClass('active');
  $('#1m').removeClass('active');
  $('#3m').removeClass('active');
  $('#6m').removeClass('active');
  $('#1y').removeClass('active');
  $('#1w').addClass('active');

  $('#1w').click(function() {
    $('#1w').removeClass('active');
    $('#1m').removeClass('active');
    $('#3m').removeClass('active');
    $('#6m').removeClass('active');
    $('#1y').removeClass('active');
    $('#1w').addClass('active');
  });

  $('#1m').click(function() {
    $('#1w').removeClass('active');
    $('#1m').removeClass('active');
    $('#3m').removeClass('active');
    $('#6m').removeClass('active');
    $('#1y').removeClass('active');
    $('#1m').addClass('active');
  });

  $('#3m').click(function() {
    $('#1w').removeClass('active');
    $('#1m').removeClass('active');
    $('#3m').removeClass('active');
    $('#6m').removeClass('active');
    $('#1y').removeClass('active');
    $('#3m').addClass('active');
  });

  $('#6m').click(function() {
    $('#1w').removeClass('active');
    $('#1m').removeClass('active');
    $('#3m').removeClass('active');
    $('#6m').removeClass('active');
    $('#1y').removeClass('active');
    $('#6m').addClass('active');
  });

  $('#1y').click(function() {
    $('#1w').removeClass('active');
    $('#1m').removeClass('active');
    $('#3m').removeClass('active');
    $('#6m').removeClass('active');
    $('#1y').removeClass('active');
    $('#1y').addClass('active');
  });

  $('#sunburst').click(function() {
      $('#friends').removeClass('active');
      $('#digraph').removeClass('active');
      $('#lineplot').removeClass('active');
      $('#sunburst').removeClass('active');
      $('#sunburst').addClass('active');
  });

  $('#digraph').click(function() {
      $('#friends').removeClass('active');
      $('#digraph').removeClass('active');
      $('#lineplot').removeClass('active');
      $('#sunburst').removeClass('active');
      $('#digraph').addClass('active');
  });

  $('#lineplot').click(function() {
      $('#friends').removeClass('active');
      $('#digraph').removeClass('active');
      $('#lineplot').removeClass('active');
      $('#sunburst').removeClass('active');
      $('#lineplot').addClass('active');
  });

  $('#friends').click(function() {
      $('#friends').removeClass('active');
      $('#digraph').removeClass('active');
      $('#lineplot').removeClass('active');
      $('#sunburst').removeClass('active');
      $('#friends').addClass('active');
  });
});
</script>

<!-- <script src="/static/sidebar.js"></script> -->

{% endblock %}
