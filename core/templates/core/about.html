<!doctype html>
{% load staticfiles %}
<html lang="en" ng-app>
<head>
	<meta charset="utf-8">
	<title>Dat Histograph Doe</title>
	<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="/static/sidr/src/jquery.sidr.js"></script>
  <link rel="stylesheet" href="/static/sidr/src/myCSS.css">
  <link rel="stylesheet" href="/static/sidr/src/jquery.sidr.dark.css">

</head>
<body>
  <div id="all">
	<div align="center">
   <h1>We bring the Payne</h1>
   <h2>Sam has unfortunately visited the following sites: </h2>
   <p>{{ domain }}</p>
   <table class="table" id="tb">
    <th>Visit Time</th>
    <th>Url</th>
    <th>Referrer</th>
    <th>Browser Id</th>
    <th>Last Title</th>
    <th>Extension Id</th>
    <th>Transition Type</th>
  </table>

<div id="example-source" class="hidden">
	<header id="demoheader">
   <h1>History Analytics</h1>
 </header>
 <ul>
   <li><span class="fake-line" onclick="buttonClick1()">Graph 1</span></li>
   <li>Graph 2</li>
   <li>Graph 3</li>
   <li>Graph 4</li>
   <li>Graph 5</li>
   <li>Graph 6</li>
 </ul>
</div>

<div id="other-source" class="hidden">
  <p>This is a right menu!!!!!!!!!!!!!!!</p>
</div>
</div>
<div class="alignleft">
 <button type="button" class="btn btn-default" id="left-menu" href="#left-menu">
    <span class="glyphicon glyphicon-chevron-left"></span></button>
</button>
</div>
<div class="alignright">
 <button type="button" class="btn btn-default" id="right-menu" href="#right-menu">
  <span class="glyphicon glyphicon-chevron-right"></span></button>
</div>
<div style="clear: both;"></div>

<!-- <script src="/static/sidr/dist/jquery.sidr.js"></script>
-->
<div id="testLoad" align="center">

</div>
</body>

<script type="text/javascript">
var items = [];
$.getJSON( "http://{{ domain }}/core/send", function( data ) {
	/*$.each( data, function( key, val ) {
		items.push(val.fields.visit_time);
		console.log("<p>" + val.fields.visit_time + "</p>");
		$("h3").append("<li>"  + val.fields.url + "</li>");

	});*/

var tbl_body = "";
$.each(data, function(key, val) {
  var tbl_row = "";
  $.each(val.fields, function(k , v) {
    tbl_row += "<td>"+v+"</td>";
  })
  tbl_body += "<tr>"+tbl_row+"</tr>";                 
})
$("#tb").append(tbl_body);

});
</script>

<script>
$(document).ready(function() {

  // Open left side menu
  $('#left-menu').sidr({
    name: 'sidr-left',
    side: 'left', 
    source: "#example-source",
    onOpen: function() {
    }
  });

  // close both menus when hover over area that's not in the side
  $("div").hover(
    function() {
      $.sidr('close', 'sidr-left');
      $.sidr('close', 'sidr-right');
    });

  // open right side menu
  $('#right-menu').sidr({
    name: 'sidr-right',
    side: 'right', 
    source: "#other-source"
  });

});
</script>

<script type="text/javascript">
// load graphs on click
function buttonClick1() {
  console.log("graph1 loading");
  $("#testLoad").load("testLoad");
}
</script>

<script type="text/javascript">

</script>
</html>
